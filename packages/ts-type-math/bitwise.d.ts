// import type { U8Hex, Nibble } from "./conversion.d.ts";

import { Bit, To32Binary, ToDecimal } from "./binary";

// export namespace BitwiseU8Hex {
//   export type And<
//     a extends U8Hex,
//     b extends U8Hex,

//     RESULT extends string =
//       a extends `${infer a1 extends Nibble}${infer a2 extends Nibble}`
//       ? b extends `${infer b1 extends Nibble}${infer b2 extends Nibble}`
//         ? `${NibbleLookup.And[a1][b1]}${NibbleLookup.And[a2][b2]}`
//         : never
//       : never
//   > = RESULT;

//   export type Or<
//     a extends U8Hex,
//     b extends U8Hex,

//     RESULT extends string =
//       a extends `${infer a1 extends Nibble}${infer a2 extends Nibble}`
//       ? b extends `${infer b1 extends Nibble}${infer b2 extends Nibble}`
//         ? `${NibbleLookup.Or[a1][b1]}${NibbleLookup.Or[a2][b2]}`
//         : never
//       : never
//   > = RESULT;

//   export type Xor<
//     a extends U8Hex,
//     b extends U8Hex,

//     RESULT extends string =
//       a extends `${infer a1 extends Nibble}${infer a2 extends Nibble}`
//       ? b extends `${infer b1 extends Nibble}${infer b2 extends Nibble}`
//         ? `${NibbleLookup.Xor[a1][b1]}${NibbleLookup.Xor[a2][b2]}`
//         : never
//       : never
//   > = RESULT;
  
//   export type Not<
//     a extends U8Hex
//   > =
//     a extends `${infer a1 extends Nibble}${infer a2 extends Nibble}`
//     ? `${NibbleLookup.Not[a1]}${NibbleLookup.Not[a2]}`
//     : never
// }

// export namespace NibbleLookup {
//   type And = {
//     "0": {
//       "0": "0",
//       "1": "0",
//       "2": "0",
//       "3": "0",
//       "4": "0",
//       "5": "0",
//       "6": "0",
//       "7": "0",
//       "8": "0",
//       "9": "0",
//       "a": "0",
//       "b": "0",
//       "c": "0",
//       "d": "0",
//       "e": "0",
//       "f": "0"
//     },
//     "1": {
//       "0": "0",
//       "1": "1",
//       "2": "0",
//       "3": "1",
//       "4": "0",
//       "5": "1",
//       "6": "0",
//       "7": "1",
//       "8": "0",
//       "9": "1",
//       "a": "0",
//       "b": "1",
//       "c": "0",
//       "d": "1",
//       "e": "0",
//       "f": "1"
//     },
//     "2": {
//       "0": "0",
//       "1": "0",
//       "2": "2",
//       "3": "2",
//       "4": "0",
//       "5": "0",
//       "6": "2",
//       "7": "2",
//       "8": "0",
//       "9": "0",
//       "a": "2",
//       "b": "2",
//       "c": "0",
//       "d": "0",
//       "e": "2",
//       "f": "2"
//     },
//     "3": {
//       "0": "0",
//       "1": "1",
//       "2": "2",
//       "3": "3",
//       "4": "0",
//       "5": "1",
//       "6": "2",
//       "7": "3",
//       "8": "0",
//       "9": "1",
//       "a": "2",
//       "b": "3",
//       "c": "0",
//       "d": "1",
//       "e": "2",
//       "f": "3"
//     },
//     "4": {
//       "0": "0",
//       "1": "0",
//       "2": "0",
//       "3": "0",
//       "4": "4",
//       "5": "4",
//       "6": "4",
//       "7": "4",
//       "8": "0",
//       "9": "0",
//       "a": "0",
//       "b": "0",
//       "c": "4",
//       "d": "4",
//       "e": "4",
//       "f": "4"
//     },
//     "5": {
//       "0": "0",
//       "1": "1",
//       "2": "0",
//       "3": "1",
//       "4": "4",
//       "5": "5",
//       "6": "4",
//       "7": "5",
//       "8": "0",
//       "9": "1",
//       "a": "0",
//       "b": "1",
//       "c": "4",
//       "d": "5",
//       "e": "4",
//       "f": "5"
//     },
//     "6": {
//       "0": "0",
//       "1": "0",
//       "2": "2",
//       "3": "2",
//       "4": "4",
//       "5": "4",
//       "6": "6",
//       "7": "6",
//       "8": "0",
//       "9": "0",
//       "a": "2",
//       "b": "2",
//       "c": "4",
//       "d": "4",
//       "e": "6",
//       "f": "6"
//     },
//     "7": {
//       "0": "0",
//       "1": "1",
//       "2": "2",
//       "3": "3",
//       "4": "4",
//       "5": "5",
//       "6": "6",
//       "7": "7",
//       "8": "0",
//       "9": "1",
//       "a": "2",
//       "b": "3",
//       "c": "4",
//       "d": "5",
//       "e": "6",
//       "f": "7"
//     },
//     "8": {
//       "0": "0",
//       "1": "0",
//       "2": "0",
//       "3": "0",
//       "4": "0",
//       "5": "0",
//       "6": "0",
//       "7": "0",
//       "8": "8",
//       "9": "8",
//       "a": "8",
//       "b": "8",
//       "c": "8",
//       "d": "8",
//       "e": "8",
//       "f": "8"
//     },
//     "9": {
//       "0": "0",
//       "1": "1",
//       "2": "0",
//       "3": "1",
//       "4": "0",
//       "5": "1",
//       "6": "0",
//       "7": "1",
//       "8": "8",
//       "9": "9",
//       "a": "8",
//       "b": "9",
//       "c": "8",
//       "d": "9",
//       "e": "8",
//       "f": "9"
//     },
//     "a": {
//       "0": "0",
//       "1": "0",
//       "2": "2",
//       "3": "2",
//       "4": "0",
//       "5": "0",
//       "6": "2",
//       "7": "2",
//       "8": "8",
//       "9": "8",
//       "a": "a",
//       "b": "a",
//       "c": "8",
//       "d": "8",
//       "e": "a",
//       "f": "a"
//     },
//     "b": {
//       "0": "0",
//       "1": "1",
//       "2": "2",
//       "3": "3",
//       "4": "0",
//       "5": "1",
//       "6": "2",
//       "7": "3",
//       "8": "8",
//       "9": "9",
//       "a": "a",
//       "b": "b",
//       "c": "8",
//       "d": "9",
//       "e": "a",
//       "f": "b"
//     },
//     "c": {
//       "0": "0",
//       "1": "0",
//       "2": "0",
//       "3": "0",
//       "4": "4",
//       "5": "4",
//       "6": "4",
//       "7": "4",
//       "8": "8",
//       "9": "8",
//       "a": "8",
//       "b": "8",
//       "c": "c",
//       "d": "c",
//       "e": "c",
//       "f": "c"
//     },
//     "d": {
//       "0": "0",
//       "1": "1",
//       "2": "0",
//       "3": "1",
//       "4": "4",
//       "5": "5",
//       "6": "4",
//       "7": "5",
//       "8": "8",
//       "9": "9",
//       "a": "8",
//       "b": "9",
//       "c": "c",
//       "d": "d",
//       "e": "c",
//       "f": "d"
//     },
//     "e": {
//       "0": "0",
//       "1": "0",
//       "2": "2",
//       "3": "2",
//       "4": "4",
//       "5": "4",
//       "6": "6",
//       "7": "6",
//       "8": "8",
//       "9": "8",
//       "a": "a",
//       "b": "a",
//       "c": "c",
//       "d": "c",
//       "e": "e",
//       "f": "e"
//     },
//     "f": {
//       "0": "0",
//       "1": "1",
//       "2": "2",
//       "3": "3",
//       "4": "4",
//       "5": "5",
//       "6": "6",
//       "7": "7",
//       "8": "8",
//       "9": "9",
//       "a": "a",
//       "b": "b",
//       "c": "c",
//       "d": "d",
//       "e": "e",
//       "f": "f"
//     }
//   };

//   type Or = {
//     "0": {
//       "0": "0",
//       "1": "1",
//       "2": "2",
//       "3": "3",
//       "4": "4",
//       "5": "5",
//       "6": "6",
//       "7": "7",
//       "8": "8",
//       "9": "9",
//       "a": "a",
//       "b": "b",
//       "c": "c",
//       "d": "d",
//       "e": "e",
//       "f": "f"
//     },
//     "1": {
//       "0": "1",
//       "1": "1",
//       "2": "3",
//       "3": "3",
//       "4": "5",
//       "5": "5",
//       "6": "7",
//       "7": "7",
//       "8": "9",
//       "9": "9",
//       "a": "b",
//       "b": "b",
//       "c": "d",
//       "d": "d",
//       "e": "f",
//       "f": "f"
//     },
//     "2": {
//       "0": "2",
//       "1": "3",
//       "2": "2",
//       "3": "3",
//       "4": "6",
//       "5": "7",
//       "6": "6",
//       "7": "7",
//       "8": "a",
//       "9": "b",
//       "a": "a",
//       "b": "b",
//       "c": "e",
//       "d": "f",
//       "e": "e",
//       "f": "f"
//     },
//     "3": {
//       "0": "3",
//       "1": "3",
//       "2": "3",
//       "3": "3",
//       "4": "7",
//       "5": "7",
//       "6": "7",
//       "7": "7",
//       "8": "b",
//       "9": "b",
//       "a": "b",
//       "b": "b",
//       "c": "f",
//       "d": "f",
//       "e": "f",
//       "f": "f"
//     },
//     "4": {
//       "0": "4",
//       "1": "5",
//       "2": "6",
//       "3": "7",
//       "4": "4",
//       "5": "5",
//       "6": "6",
//       "7": "7",
//       "8": "c",
//       "9": "d",
//       "a": "e",
//       "b": "f",
//       "c": "c",
//       "d": "d",
//       "e": "e",
//       "f": "f"
//     },
//     "5": {
//       "0": "5",
//       "1": "5",
//       "2": "7",
//       "3": "7",
//       "4": "5",
//       "5": "5",
//       "6": "7",
//       "7": "7",
//       "8": "d",
//       "9": "d",
//       "a": "f",
//       "b": "f",
//       "c": "d",
//       "d": "d",
//       "e": "f",
//       "f": "f"
//     },
//     "6": {
//       "0": "6",
//       "1": "7",
//       "2": "6",
//       "3": "7",
//       "4": "6",
//       "5": "7",
//       "6": "6",
//       "7": "7",
//       "8": "e",
//       "9": "f",
//       "a": "e",
//       "b": "f",
//       "c": "e",
//       "d": "f",
//       "e": "e",
//       "f": "f"
//     },
//     "7": {
//       "0": "7",
//       "1": "7",
//       "2": "7",
//       "3": "7",
//       "4": "7",
//       "5": "7",
//       "6": "7",
//       "7": "7",
//       "8": "f",
//       "9": "f",
//       "a": "f",
//       "b": "f",
//       "c": "f",
//       "d": "f",
//       "e": "f",
//       "f": "f"
//     },
//     "8": {
//       "0": "8",
//       "1": "9",
//       "2": "a",
//       "3": "b",
//       "4": "c",
//       "5": "d",
//       "6": "e",
//       "7": "f",
//       "8": "8",
//       "9": "9",
//       "a": "a",
//       "b": "b",
//       "c": "c",
//       "d": "d",
//       "e": "e",
//       "f": "f"
//     },
//     "9": {
//       "0": "9",
//       "1": "9",
//       "2": "b",
//       "3": "b",
//       "4": "d",
//       "5": "d",
//       "6": "f",
//       "7": "f",
//       "8": "9",
//       "9": "9",
//       "a": "b",
//       "b": "b",
//       "c": "d",
//       "d": "d",
//       "e": "f",
//       "f": "f"
//     },
//     "a": {
//       "0": "a",
//       "1": "b",
//       "2": "a",
//       "3": "b",
//       "4": "e",
//       "5": "f",
//       "6": "e",
//       "7": "f",
//       "8": "a",
//       "9": "b",
//       "a": "a",
//       "b": "b",
//       "c": "e",
//       "d": "f",
//       "e": "e",
//       "f": "f"
//     },
//     "b": {
//       "0": "b",
//       "1": "b",
//       "2": "b",
//       "3": "b",
//       "4": "f",
//       "5": "f",
//       "6": "f",
//       "7": "f",
//       "8": "b",
//       "9": "b",
//       "a": "b",
//       "b": "b",
//       "c": "f",
//       "d": "f",
//       "e": "f",
//       "f": "f"
//     },
//     "c": {
//       "0": "c",
//       "1": "d",
//       "2": "e",
//       "3": "f",
//       "4": "c",
//       "5": "d",
//       "6": "e",
//       "7": "f",
//       "8": "c",
//       "9": "d",
//       "a": "e",
//       "b": "f",
//       "c": "c",
//       "d": "d",
//       "e": "e",
//       "f": "f"
//     },
//     "d": {
//       "0": "d",
//       "1": "d",
//       "2": "f",
//       "3": "f",
//       "4": "d",
//       "5": "d",
//       "6": "f",
//       "7": "f",
//       "8": "d",
//       "9": "d",
//       "a": "f",
//       "b": "f",
//       "c": "d",
//       "d": "d",
//       "e": "f",
//       "f": "f"
//     },
//     "e": {
//       "0": "e",
//       "1": "f",
//       "2": "e",
//       "3": "f",
//       "4": "e",
//       "5": "f",
//       "6": "e",
//       "7": "f",
//       "8": "e",
//       "9": "f",
//       "a": "e",
//       "b": "f",
//       "c": "e",
//       "d": "f",
//       "e": "e",
//       "f": "f"
//     },
//     "f": {
//       "0": "f",
//       "1": "f",
//       "2": "f",
//       "3": "f",
//       "4": "f",
//       "5": "f",
//       "6": "f",
//       "7": "f",
//       "8": "f",
//       "9": "f",
//       "a": "f",
//       "b": "f",
//       "c": "f",
//       "d": "f",
//       "e": "f",
//       "f": "f"
//     }
//   }

//   type Xor = {
//     "0": {
//       "0": "0",
//       "1": "1",
//       "2": "2",
//       "3": "3",
//       "4": "4",
//       "5": "5",
//       "6": "6",
//       "7": "7",
//       "8": "8",
//       "9": "9",
//       "a": "a",
//       "b": "b",
//       "c": "c",
//       "d": "d",
//       "e": "e",
//       "f": "f"
//     },
//     "1": {
//       "0": "1",
//       "1": "0",
//       "2": "3",
//       "3": "2",
//       "4": "5",
//       "5": "4",
//       "6": "7",
//       "7": "6",
//       "8": "9",
//       "9": "8",
//       "a": "b",
//       "b": "a",
//       "c": "d",
//       "d": "c",
//       "e": "f",
//       "f": "e"
//     },
//     "2": {
//       "0": "2",
//       "1": "3",
//       "2": "0",
//       "3": "1",
//       "4": "6",
//       "5": "7",
//       "6": "4",
//       "7": "5",
//       "8": "a",
//       "9": "b",
//       "a": "8",
//       "b": "9",
//       "c": "e",
//       "d": "f",
//       "e": "c",
//       "f": "d"
//     },
//     "3": {
//       "0": "3",
//       "1": "2",
//       "2": "1",
//       "3": "0",
//       "4": "7",
//       "5": "6",
//       "6": "5",
//       "7": "4",
//       "8": "b",
//       "9": "a",
//       "a": "9",
//       "b": "8",
//       "c": "f",
//       "d": "e",
//       "e": "d",
//       "f": "c"
//     },
//     "4": {
//       "0": "4",
//       "1": "5",
//       "2": "6",
//       "3": "7",
//       "4": "0",
//       "5": "1",
//       "6": "2",
//       "7": "3",
//       "8": "c",
//       "9": "d",
//       "a": "e",
//       "b": "f",
//       "c": "8",
//       "d": "9",
//       "e": "a",
//       "f": "b"
//     },
//     "5": {
//       "0": "5",
//       "1": "4",
//       "2": "7",
//       "3": "6",
//       "4": "1",
//       "5": "0",
//       "6": "3",
//       "7": "2",
//       "8": "d",
//       "9": "c",
//       "a": "f",
//       "b": "e",
//       "c": "9",
//       "d": "8",
//       "e": "b",
//       "f": "a"
//     },
//     "6": {
//       "0": "6",
//       "1": "7",
//       "2": "4",
//       "3": "5",
//       "4": "2",
//       "5": "3",
//       "6": "0",
//       "7": "1",
//       "8": "e",
//       "9": "f",
//       "a": "c",
//       "b": "d",
//       "c": "a",
//       "d": "b",
//       "e": "8",
//       "f": "9"
//     },
//     "7": {
//       "0": "7",
//       "1": "6",
//       "2": "5",
//       "3": "4",
//       "4": "3",
//       "5": "2",
//       "6": "1",
//       "7": "0",
//       "8": "f",
//       "9": "e",
//       "a": "d",
//       "b": "c",
//       "c": "b",
//       "d": "a",
//       "e": "9",
//       "f": "8"
//     },
//     "8": {
//       "0": "8",
//       "1": "9",
//       "2": "a",
//       "3": "b",
//       "4": "c",
//       "5": "d",
//       "6": "e",
//       "7": "f",
//       "8": "0",
//       "9": "1",
//       "a": "2",
//       "b": "3",
//       "c": "4",
//       "d": "5",
//       "e": "6",
//       "f": "7"
//     },
//     "9": {
//       "0": "9",
//       "1": "8",
//       "2": "b",
//       "3": "a",
//       "4": "d",
//       "5": "c",
//       "6": "f",
//       "7": "e",
//       "8": "1",
//       "9": "0",
//       "a": "3",
//       "b": "2",
//       "c": "5",
//       "d": "4",
//       "e": "7",
//       "f": "6"
//     },
//     "a": {
//       "0": "a",
//       "1": "b",
//       "2": "8",
//       "3": "9",
//       "4": "e",
//       "5": "f",
//       "6": "c",
//       "7": "d",
//       "8": "2",
//       "9": "3",
//       "a": "0",
//       "b": "1",
//       "c": "6",
//       "d": "7",
//       "e": "4",
//       "f": "5"
//     },
//     "b": {
//       "0": "b",
//       "1": "a",
//       "2": "9",
//       "3": "8",
//       "4": "f",
//       "5": "e",
//       "6": "d",
//       "7": "c",
//       "8": "3",
//       "9": "2",
//       "a": "1",
//       "b": "0",
//       "c": "7",
//       "d": "6",
//       "e": "5",
//       "f": "4"
//     },
//     "c": {
//       "0": "c",
//       "1": "d",
//       "2": "e",
//       "3": "f",
//       "4": "8",
//       "5": "9",
//       "6": "a",
//       "7": "b",
//       "8": "4",
//       "9": "5",
//       "a": "6",
//       "b": "7",
//       "c": "0",
//       "d": "1",
//       "e": "2",
//       "f": "3"
//     },
//     "d": {
//       "0": "d",
//       "1": "c",
//       "2": "f",
//       "3": "e",
//       "4": "9",
//       "5": "8",
//       "6": "b",
//       "7": "a",
//       "8": "5",
//       "9": "4",
//       "a": "7",
//       "b": "6",
//       "c": "1",
//       "d": "0",
//       "e": "3",
//       "f": "2"
//     },
//     "e": {
//       "0": "e",
//       "1": "f",
//       "2": "c",
//       "3": "d",
//       "4": "a",
//       "5": "b",
//       "6": "8",
//       "7": "9",
//       "8": "6",
//       "9": "7",
//       "a": "4",
//       "b": "5",
//       "c": "2",
//       "d": "3",
//       "e": "0",
//       "f": "1"
//     },
//     "f": {
//       "0": "f",
//       "1": "e",
//       "2": "d",
//       "3": "c",
//       "4": "b",
//       "5": "a",
//       "6": "9",
//       "7": "8",
//       "8": "7",
//       "9": "6",
//       "a": "5",
//       "b": "4",
//       "c": "3",
//       "d": "2",
//       "e": "1",
//       "f": "0"
//     }
//   }

//   type Not = {
//     "0": "f",
//     "1": "e",
//     "2": "d",
//     "3": "c",
//     "4": "b",
//     "5": "a",
//     "6": "9",
//     "7": "8",
//     "8": "7",
//     "9": "6",
//     "a": "5",
//     "b": "4",
//     "c": "3",
//     "d": "2",
//     "e": "1",
//     "f": "0"
//   };
// }


type LookupBitAnd = {
  '0': {
    '0': '0';
    '1': '0';
  };
  '1': {
    '0': '0';
    '1': '1';
  };
}

type LookupBitOr = {
  '0': {
    '0': '0';
    '1': '1';
  };
  '1': {
    '0': '1';
    '1': '1';
  };
}

type LookupBitXor = {
  '0': {
    '0': '0';
    '1': '1';
  };
  '1': {
    '0': '1';
    '1': '0';
  };
}

type ProcessLookup<
A extends string,
B extends string,
Lookup extends Record<Bit, Record<Bit, Bit>>,
> =
A extends `${infer AHead extends Bit}${infer ATail extends string}`
? B extends `${infer BHead extends Bit}${infer BTail extends string}`
  ? `${Lookup[AHead][BHead]}${ProcessLookup<ATail, BTail, Lookup>}`
  : never // should always be equal number of digits
: ''

export type BitwiseAnd<
  T extends number,
  U extends number
> =
  ToDecimal<
    ProcessLookup<To32Binary<T>, To32Binary<U>, LookupBitAnd>
  >

export type BitwiseOr<
  T extends number,
  U extends number
> =
  ToDecimal<
    ProcessLookup<To32Binary<T>, To32Binary<U>, LookupBitOr>
  >

export type BitwiseXor<
  T extends number,
  U extends number
> =
  ToDecimal<
    ProcessLookup<To32Binary<T>, To32Binary<U>, LookupBitXor>
  >